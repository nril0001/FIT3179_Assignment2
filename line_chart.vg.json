{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "params":[
    {
    "name": "Category_selection",
      "bind": {
        "input": "select",
        "options": [
          null,
          "chemistry",
          "economics",
          "literature",
          "medicine",
          "peace",
          "physics"
          
          
        ],
        "labels":[
          "Show All",
          "Chemistry",
          "Economics",
          "Literature",
          "Medicine",
          "Peace",
          "Physics"
        ],
        "name": "Category Selection: "
      }
    }
  ],
  "hconcat": [
    {
    "title": "Portion of Nobels Prize Won By Women",
    "width": 300,
    "height":300,
    "description": "Stock prices of 5 Tech Companies over Time.",
    "data": {"url": "./data/nobels_per_decade.csv"},
    
    "transform": [
      {"filter":"Category_selection == null || datum.category == Category_selection"},
      {"calculate": "datum.portion * 100", "as": "Portion of Women"}
    ],
    "mark": {
      "type": "line",
      "point": true
    },
    "encoding": {
      "x": {"timeUnit":"year",  "field": "decade", "type": "temporal"},
      "y": {"field": "Portion of Women", "type": "quantitative", "scale":{"domain":[0,50]}
            },
      "color": {"field": "category", "type": "nominal", "legend":{"title":"Category"}},
      "tooltip": [
        {"field": "decade", "type": "temporal"},
        {"field": "Portion of Women", "type": "quantitative", "format": ","},
        {"field": "category", "type": "nominal"}
      ]
    }
    },
    {
      "title": "Nobel Prize Winner Age Distribution",
      "width": 300,
      "height":300,
      "data": {"url": "./data/nobels_per_age.csv"},
      "transform": [
        {"filter":"Category_selection == null || datum.category == Category_selection"},
        {"calculate": "datum.portion * 100", "as": "Portion of Women"}
      ],
      "layer": [
        { 
          "mark": {
            "type": "point",
            "filled": true
          },
          "encoding": {
            "x": {
              "timeUnit":"year",
              "field": "year",
              "type": "temporal"
            },
            "y": {
              "field": "age",
              "type": "quantitative"
            },
            "color":{
                "field":"category",
                "type": "nominal",
                "scale": {
                  "domain": [
                    "chemistry",
                    "economics",
                    "literature",
                    "medicine",
                    "peace",
                    "physics"
                ],
                "range": [
                  "#e41a1c",
                  "#984ea3",
                  "#ff7f00",
                  "#a6cee3",
                  "#377eb8",
                  "#a65628"
                ]
              }
            },
            "tooltip": [
              {"field": "category", "type": "nominal"},
              {"field": "age", "type": "quantitative", "format": ","},
              {"field": "year", "type": "temporal", "timeUnit":"year"}
            ]
    
          }
        },
        {
          "mark": {
            "type": "line",
            "color": "firebrick"
          },
          "transform": [
            {
              "regression": "age",
              "on": "year"
            }
          ],
          "encoding": {
            "x": {
              "timeUnit":"year",
              "field": "year",
              "type": "temporal"
            },
            "y": {
              "field": "age",
              "type": "quantitative"
            }
          }
        },
        {
          "transform": [
            {
              "regression": "age",
              "on": "year",
              "params": true
            },
            {"calculate": "'RÂ²: '+format(datum.rSquared, '.2f')", "as": "R2"}
          ],
          "mark": {
            "type": "text",
            "color": "firebrick",
            "x": "width",
            "align": "right",
            "y": -5
          },
          "encoding": {
            "text": {"type": "nominal", "field": "R2"}
          }
        }
      ]



    }
    
  ]


}